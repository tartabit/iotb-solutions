{
  "templateDef": [
    {
      "name": "Generic Event",
      "key": "generic_event",
      "desc": "Generic event to watch to send data..",
      "type": "generic-key"
    },
    {
      "name": "InfluxDB server",
      "key": "server",
      "desc": "The URL for the influxdb server.",
      "value": "https://<address>"
    },
	{
      "name": "Bucket Name",
      "key": "bucket",
      "desc": "The name of the bucket.",
      "value": "demo"
    },
    {
      "name": "Organization Name",
      "key": "org",
      "desc": "The name of the organization.",
      "value": "tartabit"
    },
    {
      "name": "Secret Token",
      "key": "token",
      "desc": "The name of the organization.",
      "value": "",
      "secret": true
    },
	{
      "name": "Metric name",
      "key": "metric_name",
      "desc": "The name of the metric to publish.",
      "value": "demo"
    }
  ],
  "services": [
    {
      "id": "5f5b9e49dfb509446ef1b741",
      "name": "InfluxDB",
      "key": "influxdb-connector",
      "modelId": "81f3b4b560a24e692418b239",
      "params": {
        "bucket": "{{.bucket}}",
        "org": "{{.org}}",
        "token": "{{.token}}",
        "url": "{{.server}}"
      }
    }
  ],
  "triggers": [
    {
      "def": "var obj = convert.flattenObject(event.data.data,'_')\r\n\r\nif (event.endpoint) {\r\n    influxdb.publish('influxdb-connector', '{{.metric_name}}', { name: event.endpoint.name, key: event.endpoint.key }, obj)\r\n} else {\r\n    influxdb.publish('influxdb-connector', '{{.metric_name}}', undefined, obj)\r\n}",
      "filterGeneric": "{{.generic_event}}",
      "filterType": "generic",
      "id": "697fd094dcf9a23a609f4cff",
      "name": "Send to InfluxDB",
      "rateLimit": {
        "scope": "none",
        "unit": "minute"
      },
      "type": "script"
    }
  ]
}